# v0.1.10 - 2026-02-03

**Status:** Go Shared Library Mode Polish Release

Fast-follow polish release improving Go shared-library mode developer experience and clarifying multi-Rust FFI collision guidance.

## Highlights

- **`sysprims_shared_local` Tag**: New opt-in build tag for local development workflows
- **Cleaner Default Shared Mode**: `sysprims_shared` no longer references non-existent local paths
- **Clearer Multi-Rust Guidance**: README explicitly documents duplicate symbol `_rust_eh_personality` failure mode

## New Build Tag: `sysprims_shared_local`

For developers who need to link against locally-built shared libraries:

```bash
# Local development with custom shared libs
# (libs must be in bindings/go/sysprims/lib-shared/local/<platform>/)
go test -v -tags="sysprims_shared,sysprims_shared_local" ./...
```

This tag re-enables the local override paths that were previously searched by default, which caused confusing linker warnings when the directory didn't exist.

## Cleaner Default: `sysprims_shared`

The default shared mode now only searches shipped prebuilt libraries:

```bash
# Standard shared mode (no local paths searched)
# glibc/macOS/Windows
go test -v -tags=sysprims_shared ./...

# Alpine/musl
go test -v -tags="musl,sysprims_shared" ./...
```

This eliminates the linker warnings that previously appeared when `lib-shared/local/` didn't exist.

## Multi-Rust FFI Collision Guidance

The README now explicitly documents the "multiple Rust FFI libs in one Go binary" failure mode:

**Symptom:** Link errors mentioning duplicate symbols like `_rust_eh_personality`

**Cause:** Linking multiple Rust static libraries (via cgo `//#cgo LDFLAGS: -l...`) in a single Go binary causes duplicate Rust runtime symbols.

**Solution:** Use sysprims as a shared library:

| Platform            | Build Tags                                      |
| ------------------- | ----------------------------------------------- |
| glibc/macOS/Windows | `-tags=sysprims_shared`                         |
| Alpine/musl         | `-tags="musl,sysprims_shared"`                  |
| Local dev override  | `-tags="sysprims_shared,sysprims_shared_local"` |

### When to Use Shared Mode

**Default (static linking):**

```bash
go test ./...
```

- Recommended unless you hit Rust staticlib collisions
- Links against prebuilt `libsysprims_ffi.a` static library

**Shared mode (avoids duplicate symbols):**

```bash
# Standard platforms
go test -tags=sysprims_shared ./...

# Alpine/musl
go test -tags="musl,sysprims_shared" ./...
```

- Required when linking multiple Rust staticlibs via cgo
- Links against prebuilt shared library (`.so`/`.dylib`/`.dll`)

**Local development override:**

```bash
go test -tags="sysprims_shared,sysprims_shared_local" ./...
```

- Links against locally-built shared library in `lib-shared/local/`
- Useful for testing local changes to the FFI layer

## Upgrade Notes

- **No breaking changes** for existing `sysprims_shared` workflows using prebuilt libraries
- If you were relying on `lib-shared/local/...` implicitly, add the `sysprims_shared_local` tag explicitly
- No changes needed for standard consumers using shipped prebuilt libs

## References

- Commit: `3b004b7` - adds `sysprims_shared_local`, removes local-path warnings, updates docs
- Go bindings: `bindings/go/sysprims/`
